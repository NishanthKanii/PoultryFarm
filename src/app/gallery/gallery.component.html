<div class="gallery-container" (keydown)="onKeyDown($event)">
  
  <!-- Gallery Header -->
  <div class="gallery-header">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-lg-2">
          <a routerLink="/" class="back-to-home-btn">
            <span>‚Üê Back to Home</span>
          </a>
        </div>
        <div class="col-lg-8 text-center">
          <h1 class="gallery-title">üì∏ Our Farm Gallery</h1>
          <p class="gallery-subtitle">Explore the beauty and daily life of our premium poultry farm through stunning photographs</p>
        </div>
        <div class="col-lg-2">
          <!-- Right side space for balance -->
        </div>
      </div>
    </div>
  </div>

  <!-- Gallery Grid -->
  <div class="gallery-grid" *ngIf="filteredImages.length > 0">
    <div class="gallery-grid-wrapper">
      <div 
        *ngFor="let image of filteredImages; let i = index"
        class="imgBox">
        <div class="gallery-item" (click)="openLightbox(image, i)">
          <div class="image-container">
            <img 
              [src]="image.src" 
              [alt]="image.alt"
              class="gallery-image"
              loading="lazy"
              (error)="onImageError($event, image)"
              [class.hidden]="image.loadError">
            <div class="image-fallback" *ngIf="image.loadError">
              <div class="fallback-content">
                <div class="fallback-icon">üñºÔ∏è</div>
                <div class="fallback-text">Image Not Loaded</div>
              </div>
            </div>
            <div class="image-overlay" *ngIf="!image.loadError">
              <div class="overlay-content">
                <h5 class="image-title">{{ image.title }}</h5>
                <p class="image-description" *ngIf="image.description">
                  {{ image.description }}
                </p>
                <div class="image-meta">
                  <span class="category-badge">{{ image.category }}</span>
                  <span class="date-badge" *ngIf="image.date">
                    {{ image.date | date:'MMM dd' }}
                  </span>
                </div>
                <div class="view-icon">
                  <i class="fas fa-expand-alt"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- No Results Message -->
  <div class="no-results" *ngIf="filteredImages.length === 0">
    <div class="container text-center">
      <div class="no-results-content">
        <div class="no-results-icon">üîç</div>
        <h3>No images found</h3>
        <p>Gallery is currently empty</p>
      </div>
    </div>
  </div>

  <!-- Lightbox Modal -->
  <div class="lightbox-overlay" *ngIf="showLightbox" (click)="closeLightbox()">
    <div class="lightbox-content" (click)="$event.stopPropagation()">
      
      <!-- Close Button -->
      <button class="lightbox-close" (click)="closeLightbox()">
        <i class="fas fa-times"></i>
      </button>

      <!-- Navigation Arrows -->
      <button class="lightbox-nav lightbox-prev" (click)="previousImage()" *ngIf="filteredImages.length > 1">
        <i class="fas fa-chevron-left"></i>
      </button>
      <button class="lightbox-nav lightbox-next" (click)="nextImage()" *ngIf="filteredImages.length > 1">
        <i class="fas fa-chevron-right"></i>
      </button>

      <!-- Main Image -->
      <div class="lightbox-image-container">
        <img 
          [src]="selectedImage?.src" 
          [alt]="selectedImage?.alt"
          class="lightbox-image"
          (error)="onLightboxImageError($event)"
          [class.hidden]="lightboxImageError">
        <div class="lightbox-fallback" *ngIf="lightboxImageError">
          <div class="fallback-content">
            <div class="fallback-icon">üñºÔ∏è</div>
            <div class="fallback-text">Image Not Loaded</div>
          </div>
        </div>
      </div>

      <!-- Image Info -->
      <div class="lightbox-info" *ngIf="!lightboxImageError">
        <h3 class="lightbox-title">{{ selectedImage?.title }}</h3>
        <p class="lightbox-description" *ngIf="selectedImage?.description">
          {{ selectedImage?.description }}
        </p>
        <div class="lightbox-meta">
          <span class="meta-category">{{ selectedImage?.category }}</span>
          <span class="meta-date" *ngIf="selectedImage?.date">
            {{ selectedImage?.date | date:'MMMM dd, yyyy' }}
          </span>
        </div>
        <div class="lightbox-counter">
          {{ currentImageIndex + 1 }} of {{ filteredImages.length }}
        </div>
      </div>

      <!-- Thumbnail Navigation -->
      <div class="lightbox-thumbnails" *ngIf="filteredImages.length > 1">
        <div 
          *ngFor="let image of filteredImages; let i = index"
          class="thumbnail-item"
          [class.active]="i === currentImageIndex"
          (click)="openLightbox(image, i)">
          <img [src]="image.src" [alt]="image.alt" class="thumbnail-image" (error)="onThumbnailError($event, image)">
        </div>
      </div>
    </div>
  </div>

  <!-- Loading Placeholder (for future API integration) -->
  <div class="loading-placeholder" *ngIf="false">
    <div class="container text-center">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p class="mt-3">Loading gallery images...</p>
    </div>
  </div>
</div>
